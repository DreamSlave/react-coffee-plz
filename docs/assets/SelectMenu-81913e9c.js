import{r,u as U,j as e,a as l}from"./index-817c5466.js";/* empty css              */import{s as y}from"./search-ic-461cbee7.js";import{C as w,A as f,a as g}from"./api.config-08d39d5d.js";import"./setPrototypeOf-0bb37fbe.js";function L({partyNo:m,cafeId:u,menu:a,orderer:n,toggleShowPopup:d}){const[p,h]=r.useState(""),j=U(),N=t=>{h(t.target.value)},I=async()=>{let t=a.menuId==="MENU9999"?p:a.menuNm;if(t.trim()==="")return alert("메뉴명을 확인해주세요."),!1;if(a.menuId==="MENU9999"){let{newMenuId:o}=await v(t);a.menuId=o}let c={userId:n.userId,menuId:a.menuId,cafeId:u,partyId:m};f.post(`${g.defaultDomain}/order/save`,c).then(o=>{o&&o.ok&&j(`/order/complete/${n.partyNo}/${encodeURIComponent(t)}`)}).catch(o=>{console.error("[/order/save] Error occurred ::: ",o)})},v=async t=>{await f.post(`${g.defaultDomain}/menu/save`,{cafeId:u,menuNm:t}).then(c=>(c==null?void 0:c.menuId)||"").catch(c=>{console.error("[/menu/save] Error occurred ::: ",c)})};return e.jsx(w,{in:!0,timeout:3e3,classNames:"fade",children:e.jsx("div",{id:"popup",className:"popup",children:e.jsxs("div",{className:"pop_confirm",children:[e.jsx("h2",{children:"선택한 메뉴를 확인해주세요."}),e.jsxs("div",{className:"person-info",children:[n.name," ",n.rank,"(",n.team,")"]}),a.menuId==="MENU9999"?e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"메뉴명 입력",value:p,onChange:N,className:"mgt10 mgb5"}),e.jsx("div",{className:"point mgb25",children:"작성하기 전에 진짜 없는 메뉴인지 확인하셨나요?"})]}):e.jsx("div",{className:"menunm",children:a.menuNm}),e.jsx("div",{className:"btn-area",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("div",{className:"large-btn bg_sub point",onClick:d,children:"재선택"})}),e.jsx("li",{children:e.jsx("div",{className:"large-btn",onClick:I,children:"확인"})})]})})]})})})}const _=()=>{const m={partyNo:l(s=>s.order.partyNo),userId:l(s=>s.order.userId),name:l(s=>s.order.name),team:l(s=>s.order.team),rank:l(s=>s.order.rank)},[u,a]=r.useState(""),[n,d]=r.useState(""),[p,h]=r.useState([]),[j,N]=r.useState(""),[I,v]=r.useState(),[t]=r.useState(["아이스","핫","라떼","에이드","샷추가","생과일","아메리카노"]),[c,o]=r.useState(!1);r.useEffect(()=>{b()},[n]);const S=s=>{a(s.target.value)},E=()=>{d(u)},C=s=>{a(s),d(s)},b=()=>{console.log(`fetchMenuList called ::: param ::: ${n}`);let s={partyId:m.partyNo,searchName:n};f.post(`${g.defaultDomain}/menu/info`,s).then(i=>{i&&i.ok&&(h(i.menuList),N(i.cafeId))}).catch(i=>{console.error("[/order/save] Error occurred ::: ",i)});let x={cafeId:"CAFE0001",menuList:[{menuId:"MENU0001",menuNm:"아메리카노(ICE)"},{menuId:"MENU0002",menuNm:"아메리카노(ICE) 연하게"},{menuId:"MENU0003",menuNm:"아메리카노(HOT)"},{menuId:"MENU0004",menuNm:"아메리카노(HOT) 연하게"},{menuId:"MENU0005",menuNm:"카페라떼(ICE)"},{menuId:"MENU0006",menuNm:"카페라떼(ICE) 연하게"},{menuId:"MENU0007",menuNm:"카페라떼(HOT)"},{menuId:"MENU9999",menuNm:"직접입력"}]};h(x.menuList),N(x.cafeId)},M=()=>{o(s=>!s)},k=s=>{M(),v(s)};return e.jsxs("div",{children:[c&&I&&e.jsx(L,{partyNo:m.partyNo,cafeId:j,menu:I,orderer:m,toggleShowPopup:M}),e.jsxs("div",{id:"order",className:"element selectmenu",children:[e.jsxs("h1",{children:[e.jsx("span",{className:"point",children:"메뉴를"}),e.jsx("br",{}),"선택해주세요."]}),e.jsxs("div",{className:"person-info bg_sub point",children:[m.name," ",m.rank,"(",m.team,")"]}),e.jsxs("div",{className:"form-search mgt25 mgb15",children:[e.jsx("div",{className:"input",children:e.jsx("input",{type:"text",placeholder:"검색",value:u,onChange:S,className:""})}),e.jsx("div",{className:"btn",children:e.jsx("img",{className:"search-ic",alt:"Search ic",src:y,onClick:E})})]}),e.jsx("div",{className:"tag-group",children:t.map((s,x)=>e.jsxs("div",{className:"menu-tag bg_pink white",onClick:()=>C(s),children:["# ",s]},x))}),e.jsx("div",{className:"orderer-list mgt25",children:p.map(s=>e.jsx("div",{className:"item",onClick:()=>k(s),children:s.menuNm},s.menuId))})]})]})};export{_ as default};
