import{e as g,a as y,r as v,u as F,j as u,b as j}from"./index-27bb99f2.js";/* empty css              */import{s as W}from"./search-ic-4293fc31.js";import{_ as B}from"./setPrototypeOf-0bb37fbe.js";function M(){return M=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(n[e]=o[e])}return n},M.apply(this,arguments)}function w(n,r){if(n==null)return{};var o={},e=Object.keys(n),s,t;for(t=0;t<e.length;t++)s=e[t],!(r.indexOf(s)>=0)&&(o[s]=n[s]);return o}function R(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,B(n,r)}function K(n,r){return n.classList?!!r&&n.classList.contains(r):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+r+" ")!==-1}function q(n,r){n.classList?n.classList.add(r):K(n,r)||(typeof n.className=="string"?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r))}function $(n,r){return n.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Q(n,r){n.classList?n.classList.remove(r):typeof n.className=="string"?n.className=$(n.className,r):n.setAttribute("class",$(n.className&&n.className.baseVal||"",r))}const _={disabled:!1},P=g.createContext(null);var V=function(r){return r.scrollTop},T="unmounted",x="exited",N="entering",b="entered",k="exiting",E=function(n){R(r,n);function r(e,s){var t;t=n.call(this,e,s)||this;var i=s,a=i&&!i.isMounting?e.enter:e.appear,c;return t.appearStatus=null,e.in?a?(c=x,t.appearStatus=N):c=b:e.unmountOnExit||e.mountOnEnter?c=T:c=x,t.state={status:c},t.nextCallback=null,t}r.getDerivedStateFromProps=function(s,t){var i=s.in;return i&&t.status===T?{status:x}:null};var o=r.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(s){var t=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==N&&i!==b&&(t=N):(i===N||i===b)&&(t=k)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var s=this.props.timeout,t,i,a;return t=i=a=s,s!=null&&typeof s!="number"&&(t=s.exit,i=s.enter,a=s.appear!==void 0?s.appear:i),{exit:t,enter:i,appear:a}},o.updateStatus=function(s,t){if(s===void 0&&(s=!1),t!==null)if(this.cancelNextCallback(),t===N){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:y.findDOMNode(this);i&&V(i)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===x&&this.setState({status:T})},o.performEnter=function(s){var t=this,i=this.props.enter,a=this.context?this.context.isMounting:s,c=this.props.nodeRef?[a]:[y.findDOMNode(this),a],l=c[0],f=c[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!s&&!i||_.disabled){this.safeSetState({status:b},function(){t.props.onEntered(l)});return}this.props.onEnter(l,f),this.safeSetState({status:N},function(){t.props.onEntering(l,f),t.onTransitionEnd(h,function(){t.safeSetState({status:b},function(){t.props.onEntered(l,f)})})})},o.performExit=function(){var s=this,t=this.props.exit,i=this.getTimeouts(),a=this.props.nodeRef?void 0:y.findDOMNode(this);if(!t||_.disabled){this.safeSetState({status:x},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:k},function(){s.props.onExiting(a),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:x},function(){s.props.onExited(a)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(s,t){t=this.setNextCallback(t),this.setState(s,t)},o.setNextCallback=function(s){var t=this,i=!0;return this.nextCallback=function(a){i&&(i=!1,t.nextCallback=null,s(a))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},o.onTransitionEnd=function(s,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:y.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!i||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],l=c[0],f=c[1];this.props.addEndListener(l,f)}s!=null&&setTimeout(this.nextCallback,s)},o.render=function(){var s=this.state.status;if(s===T)return null;var t=this.props,i=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var a=w(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return g.createElement(P.Provider,{value:null},typeof i=="function"?i(s,a):g.cloneElement(g.Children.only(i),a))},r}(g.Component);E.contextType=P;E.propTypes={};function S(){}E.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:S,onEntering:S,onEntered:S,onExit:S,onExiting:S,onExited:S};E.UNMOUNTED=T;E.EXITED=x;E.ENTERING=N;E.ENTERED=b;E.EXITING=k;const Y=E;var Z=function(r,o){return r&&o&&o.split(" ").forEach(function(e){return q(r,e)})},O=function(r,o){return r&&o&&o.split(" ").forEach(function(e){return Q(r,e)})},D=function(n){R(r,n);function r(){for(var e,s=arguments.length,t=new Array(s),i=0;i<s;i++)t[i]=arguments[i];return e=n.call.apply(n,[this].concat(t))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(a,c){var l=e.resolveArguments(a,c),f=l[0],d=l[1];e.removeClasses(f,"exit"),e.addClass(f,d?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(a,c)},e.onEntering=function(a,c){var l=e.resolveArguments(a,c),f=l[0],d=l[1],h=d?"appear":"enter";e.addClass(f,h,"active"),e.props.onEntering&&e.props.onEntering(a,c)},e.onEntered=function(a,c){var l=e.resolveArguments(a,c),f=l[0],d=l[1],h=d?"appear":"enter";e.removeClasses(f,h),e.addClass(f,h,"done"),e.props.onEntered&&e.props.onEntered(a,c)},e.onExit=function(a){var c=e.resolveArguments(a),l=c[0];e.removeClasses(l,"appear"),e.removeClasses(l,"enter"),e.addClass(l,"exit","base"),e.props.onExit&&e.props.onExit(a)},e.onExiting=function(a){var c=e.resolveArguments(a),l=c[0];e.addClass(l,"exit","active"),e.props.onExiting&&e.props.onExiting(a)},e.onExited=function(a){var c=e.resolveArguments(a),l=c[0];e.removeClasses(l,"exit"),e.addClass(l,"exit","done"),e.props.onExited&&e.props.onExited(a)},e.resolveArguments=function(a,c){return e.props.nodeRef?[e.props.nodeRef.current,a]:[a,c]},e.getClassNames=function(a){var c=e.props.classNames,l=typeof c=="string",f=l&&c?c+"-":"",d=l?""+f+a:c[a],h=l?d+"-active":c[a+"Active"],m=l?d+"-done":c[a+"Done"];return{baseClassName:d,activeClassName:h,doneClassName:m}},e}var o=r.prototype;return o.addClass=function(s,t,i){var a=this.getClassNames(t)[i+"ClassName"],c=this.getClassNames("enter"),l=c.doneClassName;t==="appear"&&i==="done"&&l&&(a+=" "+l),i==="active"&&s&&V(s),a&&(this.appliedClasses[t][i]=a,Z(s,a))},o.removeClasses=function(s,t){var i=this.appliedClasses[t],a=i.base,c=i.active,l=i.done;this.appliedClasses[t]={},a&&O(s,a),c&&O(s,c),l&&O(s,l)},o.render=function(){var s=this.props;s.classNames;var t=w(s,["classNames"]);return g.createElement(Y,M({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(g.Component);D.defaultProps={classNames:""};D.propTypes={};const ee=D,A={async get(n){try{return await fetch(n,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""}})}catch(r){console.error("Error:",r)}},async post(n,r){try{return await fetch(n,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(r)})}catch(o){console.error("Error:",o)}},async patch(n,r){try{return await fetch(n,{method:"PATCH",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(r)})}catch(o){console.error("Error:",o)}},async put(n,r){try{return await fetch(n,{method:"PUT",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(r)})}catch(o){console.error("Error:",o)}},async delete(n,r){try{return await fetch(n,{method:"DELETE",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(r)})}catch(o){console.error("Error:",o)}}},te="http://13.209.0.85",L={defaultDomain:te};function ne({partyNo:n,cafeId:r,menu:o,orderer:e,toggleShowPopup:s}){const[t,i]=v.useState(""),a=F(),c=d=>{i(d.target.value)},l=async()=>{let d=o.menuId==="MENU9999"?t:o.menuNm;if(d.trim()==="")return alert("메뉴명을 확인해주세요."),!1;if(o.menuId==="MENU9999"){let{newMenuId:m}=await f(d);o.menuId=m}let h={userId:e.userId,menuId:o.menuId,cafeId:r,partyId:n};A.post(`${L.defaultDomain}/order/save`,h).then(m=>{m&&m.ok&&a(`/order/complete/${e.partyNo}/${encodeURIComponent(d)}`)}).catch(m=>{console.error("[/order/save] Error occurred ::: ",m)})},f=async d=>{await A.post(`${L.defaultDomain}/menu/save`,{cafeId:r,menuNm:d}).then(h=>(h==null?void 0:h.menuId)||"").catch(h=>{console.error("[/menu/save] Error occurred ::: ",h)})};return u.jsx(ee,{in:!0,appear:!0,timeout:3e3,classNames:"popup",children:u.jsx("div",{id:"popup",className:"popup",children:u.jsxs("div",{className:"pop_confirm",children:[u.jsx("h2",{children:"선택한 메뉴를 확인해주세요."}),u.jsxs("div",{className:"person-info",children:[e.name," ",e.rank,"(",e.team,")"]}),o.menuId==="MENU9999"?u.jsxs("div",{children:[u.jsx("input",{type:"text",placeholder:"메뉴명 입력",value:t,onChange:c,className:"mgt10 mgb5"}),u.jsx("div",{className:"point mgb25",children:"작성하기 전에 진짜 없는 메뉴인지 확인하셨나요?"})]}):u.jsx("div",{className:"menunm",children:o.menuNm}),u.jsx("div",{className:"btn-area",children:u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx("div",{className:"large-btn bg_sub point",onClick:s,children:"재선택"})}),u.jsx("li",{children:u.jsx("div",{className:"large-btn",onClick:l,children:"확인"})})]})})]})})})}const oe=()=>{const n={partyNo:j(p=>p.order.partyNo),userId:j(p=>p.order.userId),name:j(p=>p.order.name),team:j(p=>p.order.team),rank:j(p=>p.order.rank)},[r,o]=v.useState(""),[e,s]=v.useState(""),[t,i]=v.useState([]),[a,c]=v.useState(""),[l,f]=v.useState(),[d]=v.useState(["아이스","핫","라떼","에이드","샷추가","생과일","아메리카노"]),[h,m]=v.useState(!1);v.useEffect(()=>{J()},[e]);const G=p=>{o(p.target.value)},z=()=>{s(r)},H=p=>{o(p),s(p)},J=()=>{console.log(`fetchMenuList called ::: param ::: ${e}`);let p={partyId:n.partyNo,searchName:e};A.post(`${L.defaultDomain}/menu/info`,p).then(C=>{C&&C.ok&&(i(C.menuList),c(C.cafeId))}).catch(C=>{console.error("[/order/save] Error occurred ::: ",C)});let I={cafeId:"CAFE0001",menuList:[{menuId:"MENU0001",menuNm:"아메리카노(ICE)"},{menuId:"MENU0002",menuNm:"아메리카노(ICE) 연하게"},{menuId:"MENU0003",menuNm:"아메리카노(HOT)"},{menuId:"MENU0004",menuNm:"아메리카노(HOT) 연하게"},{menuId:"MENU0005",menuNm:"카페라떼(ICE)"},{menuId:"MENU0006",menuNm:"카페라떼(ICE) 연하게"},{menuId:"MENU0007",menuNm:"카페라떼(HOT)"},{menuId:"MENU9999",menuNm:"직접입력"}]};i(I.menuList),c(I.cafeId)},U=()=>{m(p=>!p)},X=p=>{U(),f(p)};return u.jsxs("div",{children:[h&&l&&u.jsx(ne,{partyNo:n.partyNo,cafeId:a,menu:l,orderer:n,toggleShowPopup:U}),u.jsxs("div",{id:"order",className:"element selectmenu",children:[u.jsxs("h1",{children:[u.jsx("span",{className:"point",children:"메뉴를"}),u.jsx("br",{}),"선택해주세요."]}),u.jsxs("div",{className:"person-info bg_sub point",children:[n.name," ",n.rank,"(",n.team,")"]}),u.jsxs("div",{className:"form-search mgt25 mgb15",children:[u.jsx("div",{className:"input",children:u.jsx("input",{type:"text",placeholder:"검색",value:r,onChange:G,className:""})}),u.jsx("div",{className:"btn",children:u.jsx("img",{className:"search-ic",alt:"Search ic",src:W,onClick:z})})]}),u.jsx("div",{className:"tag-group",children:d.map((p,I)=>u.jsxs("div",{className:"menu-tag bg_pink white",onClick:()=>H(p),children:["# ",p]},I))}),u.jsx("div",{className:"orderer-list mgt25",children:t.map(p=>u.jsx("div",{className:"item",onClick:()=>X(p),children:p.menuNm},p.menuId))})]})]})};export{oe as default};
