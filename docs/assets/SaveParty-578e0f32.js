import{r as i,a as E,u as L,c as A,j as s,d as V}from"./index-eddb4896.js";import{D as F,e as j,k as R}from"./react-datepicker-eb6cbe2e.js";import{A as _,a as O}from"./api.config-aa286da0.js";import"./setPrototypeOf-0bb37fbe.js";const q=()=>{const[N,S]=i.useState(!0),[u,x]=i.useState(new Date),[r,f]=i.useState(new Date),[m,D]=i.useState(""),[c,g]=i.useState(""),[h,p]=i.useState(""),[o,v]=i.useState([]),[y,l]=i.useState(!0);i.useEffect(()=>{(async()=>{if(N){const d=await T();v(d),n.partyName&&D(n.partyName),n.cafeId?(p(n.cafeNm),g(n.cafeId)):c===""&&h===""&&o.length>0&&(p(String(o[0].cafeNm)),g(String(o[0].userId))),n.endDate&&x(P(n.endDate)),n.endTime?f(k(n.endTime)):f(H()),S(!1)}l(m!==""&&c!=="");const t=new Date,a=r.getTime()-t.getTime();u.getTime()>t.getTime()?l(!0):setTimeout(()=>{r.getTime()-t.getTime()>36e5?l(!0):l(!1)},a)})()},[m,c,h,u,r,N]);function T(){return _.get(`${O.defaultDomain}/cafe/info`).then(e=>e.json()).then(e=>e.data)}const I=e=>{D(e.target.value)},w=e=>{const t=o.find(a=>a.cafeId===e.cafeId);p(String(t==null?void 0:t.cafeNm)??""),g(String(t==null?void 0:t.cafeId)??"")},n=E(e=>e.party),C=L(),b=A(),M=function(){const e=u.toLocaleDateString("en-CA").replace(/-/g,""),t=r.toLocaleTimeString("en-US",{hour12:!1}).slice(0,-3).replace(":","");b(V(m,c,h,e,t)),C("/party/preview")};function P(e){const t=parseInt(e.substring(0,4),10),a=parseInt(e.substring(4,6),10)-1,d=parseInt(e.substring(6,8),10);return new Date(t,a,d)}function k(e){const t=new Date,a=parseInt(e.substring(0,2),10),d=parseInt(e.substring(2,4),10);return t.setHours(a),t.setMinutes(d),t}function H(){const e=new Date,t=e.getMinutes(),a=Math.ceil(t/15)*15;return a===60?(e.setHours(e.getHours()+1),e.setMinutes(0)):e.setMinutes(a),e.setSeconds(0),e.setMilliseconds(0),e}return s.jsxs("div",{id:"party",className:"element",children:[s.jsxs("h1",{children:["본격적으로",s.jsx("br",{}),s.jsx("span",{className:"point",children:"파티를 생성"}),"합니다."]}),s.jsxs("div",{className:"form-area",children:[s.jsxs("div",{className:"input",children:[s.jsx("div",{className:"label",children:"파티명"}),s.jsx("input",{type:"text",placeholder:"파티명을 입력하세요.",className:"",value:m,onChange:I})]}),s.jsxs("div",{children:[s.jsx("div",{className:"label",children:"카페선택"}),s.jsx("div",{className:"select",children:s.jsx(F,{onChange:e=>w(e),dataItem:o,itemKey:"cafeId",itemValue:"cafeNm",defaultValue:c})})]}),s.jsxs("div",{className:"form_date mgb10",children:[s.jsx("div",{className:"label",children:"마감설정"}),s.jsx(j,{locale:R,dateFormat:"yyyy/MM/dd",shouldCloseOnSelect:!0,className:"datepicker",selected:u,minDate:new Date,onChange:e=>x(e)})]}),s.jsx("div",{className:"form_date mgb10",children:s.jsx(j,{className:"timepicker",selected:r,onChange:e=>f(e),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"hh:mm aa"})})]}),s.jsx("footer",{id:"footer",children:y?s.jsx("div",{className:"large-btn",onClick:M,children:"미리보기"}):s.jsx("div",{className:"large-btn bg_gray",children:"미리보기"})})]})};export{q as default};
