import{r as o,u as b,j as e,a as u}from"./index-baa901d4.js";/* empty css              */import{s as T}from"./search-ic-4293fc31.js";const I={async get(a){try{return await fetch(a,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""}})}catch(s){console.error("Error:",s)}},async post(a,s){try{return await fetch(a,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(s)})}catch(n){console.error("Error:",n)}},async patch(a,s){try{return await fetch(a,{method:"PATCH",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(s)})}catch(n){console.error("Error:",n)}},async put(a,s){try{return await fetch(a,{method:"PUT",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(s)})}catch(n){console.error("Error:",n)}},async delete(a,s){try{return await fetch(a,{method:"DELETE",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json; charset=utf-8",Authorization:""},body:JSON.stringify(s)})}catch(n){console.error("Error:",n)}}},A="http://13.209.91.193",g={defaultDomain:A};function U({partyNo:a,cafeId:s,menu:n,orderer:i,toggleShowPopup:m}){const[d,h]=o.useState(""),N=b(),j=r=>{h(r.target.value)},p=async()=>{let r=n.menuId==="MENU9999"?d:n.menuNm;if(r.trim()==="")return alert("메뉴명을 확인해주세요."),!1;if(n.menuId==="MENU9999"){let{newMenuId:l}=await x(r);n.menuId=l}let c={userId:i.userId,menuId:n.menuId,cafeId:s,partyId:a};I.post(`${g.defaultDomain}/order/save`,c).then(l=>{l.ok&&N(`/order/complete/${i.partyNo}/${encodeURIComponent(r)}`)}).catch(l=>{console.error("[/order/save] Error occurred ::: ",l)})},x=async r=>{await I.post(`${g.defaultDomain}/menu/save`,{cafeId:s,menuNm:r}).then(c=>(c==null?void 0:c.menuId)||"").catch(c=>{console.error("[/menu/save] Error occurred ::: ",c)})};return e.jsx("div",{id:"popup",children:e.jsxs("div",{className:"pop_confirm",children:[e.jsx("h2",{children:"선택한 메뉴를 확인해주세요."}),e.jsxs("div",{className:"person-info",children:[i.name," ",i.rank,"(",i.team,")"]}),n.menuId==="MENU9999"?e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"메뉴명 입력",value:d,onChange:j,className:"mgt10 mgb5"}),e.jsx("div",{className:"point mgb25",children:"작성하기 전에 진짜 없는 메뉴인지 확인하셨나요?"})]}):e.jsx("div",{className:"menunm",children:n.menuNm}),e.jsx("div",{className:"btn-area",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("div",{className:"large-btn bg_sub point",onClick:m,children:"재선택"})}),e.jsx("li",{children:e.jsx("div",{className:"large-btn",onClick:p,children:"확인"})})]})})]})})}const O=()=>{const a={partyNo:u(t=>t.order.partyNo),userId:u(t=>t.order.userId),name:u(t=>t.order.name),team:u(t=>t.order.team),rank:u(t=>t.order.rank)},[s,n]=o.useState(""),[i,m]=o.useState(""),[d,h]=o.useState([]),[N,j]=o.useState(""),[p,x]=o.useState(),[r]=o.useState(["아이스","핫","라떼","에이드","샷추가","생과일","아메리카노"]),[c,l]=o.useState(!1);o.useEffect(()=>{S()},[i]);const y=t=>{n(t.target.value)},v=()=>{m(s)},E=t=>{n(t),m(t)},S=()=>{console.log(`fetchMenuList called ::: param ::: ${i}`);let t={cafeId:"CAFE0001",menuList:[{menuId:"MENU0001",menuNm:"아메리카노(ICE)"},{menuId:"MENU0002",menuNm:"아메리카노(ICE) 연하게"},{menuId:"MENU0003",menuNm:"아메리카노(HOT)"},{menuId:"MENU0004",menuNm:"아메리카노(HOT) 연하게"},{menuId:"MENU0005",menuNm:"카페라떼(ICE)"},{menuId:"MENU0006",menuNm:"카페라떼(ICE) 연하게"},{menuId:"MENU0007",menuNm:"카페라떼(HOT)"},{menuId:"MENU9999",menuNm:"직접입력"}]};h(t.menuList),j(t.cafeId)},f=()=>{l(t=>!t)},C=t=>{f(),x(t)};return e.jsxs("div",{children:[c&&p&&e.jsx(U,{partyNo:a.partyNo,cafeId:N,menu:p,orderer:a,toggleShowPopup:f}),e.jsxs("div",{id:"order",className:"element selectmenu",children:[e.jsxs("h1",{children:[e.jsx("span",{className:"point",children:"메뉴를"}),e.jsx("br",{}),"선택해주세요."]}),e.jsxs("div",{className:"person-info bg_sub point",children:[a.name," ",a.rank,"(",a.team,")"]}),e.jsxs("div",{className:"form-search mgt25 mgb15",children:[e.jsx("div",{className:"input",children:e.jsx("input",{type:"text",placeholder:"검색",value:s,onChange:y,className:""})}),e.jsx("div",{className:"btn",children:e.jsx("img",{className:"search-ic",alt:"Search ic",src:T,onClick:v})})]}),e.jsx("div",{className:"tag-group",children:r.map((t,M)=>e.jsxs("div",{className:"menu-tag bg_pink white",onClick:()=>E(t),children:["# ",t]},M))}),e.jsx("div",{className:"orderer-list mgt25",children:d.map(t=>e.jsx("div",{className:"item",onClick:()=>C(t),children:t.menuNm},t.menuId))})]})]})};export{O as default};
