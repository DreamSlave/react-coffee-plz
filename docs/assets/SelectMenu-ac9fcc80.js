import{r,u as k,j as e,a as l}from"./index-24c6da67.js";/* empty css              */import{s as U}from"./search-ic-461cbee7.js";import{C as y,A as g,a as f}from"./api.config-8ecf4f1d.js";import"./setPrototypeOf-0bb37fbe.js";function w({partyNo:m,cafeId:i,menu:n,orderer:o,show:u,toggleShowPopup:h}){const[d,N]=r.useState(""),x=k(),p=a=>{N(a.target.value)},I=async()=>{let a=n.menuId==="MENU9999"?d:n.menuNm;if(a.trim()==="")return alert("메뉴명을 확인해주세요."),!1;if(n.menuId==="MENU9999"){let{newMenuId:c}=await j(a);n.menuId=c}let t={userId:o.userId,menuId:n.menuId,cafeId:i,partyId:m};g.post(`${f.defaultDomain}/order/save`,t).then(c=>{console.log("[/order/save] response ::: ",c),c&&c.ok&&x(`/order/complete/${o.partyNo}/${encodeURIComponent(a)}`)}).catch(c=>{console.error("[/order/save] Error occurred ::: ",c)})},j=async a=>{await g.post(`${f.defaultDomain}/menu/save`,{cafeId:i,menuNm:a}).then(t=>(console.log("[/menu/save] response ::: ",t),(t==null?void 0:t.menuId)||"")).catch(t=>{console.error("[/menu/save] Error occurred ::: ",t)})};return e.jsx(y,{in:u,timeout:5e3,className:"fade",children:e.jsx("div",{children:e.jsx("div",{id:"popup",className:"popup",children:e.jsxs("div",{className:"pop_confirm",children:[e.jsx("h2",{children:"선택한 메뉴를 확인해주세요."}),e.jsxs("div",{className:"person-info",children:[o.name," ",o.rank,"(",o.team,")"]}),n.menuId==="MENU9999"?e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"메뉴명 입력",value:d,onChange:p,className:"mgt10 mgb5"}),e.jsx("div",{className:"point mgb25",children:"작성하기 전에 진짜 없는 메뉴인지 확인하셨나요?"})]}):e.jsx("div",{className:"menunm",children:n.menuNm}),e.jsx("div",{className:"btn-area",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("div",{className:"large-btn bg_sub point",onClick:h,children:"재선택"})}),e.jsx("li",{children:e.jsx("div",{className:"large-btn",onClick:I,children:"확인"})})]})})]})})})})}const _=()=>{const m={partyNo:l(s=>s.order.partyNo),userId:l(s=>s.order.userId),name:l(s=>s.order.name),team:l(s=>s.order.team),rank:l(s=>s.order.rank)},[i,n]=r.useState(""),[o,u]=r.useState(""),[h,d]=r.useState([]),[N,x]=r.useState(""),[p,I]=r.useState(),[j]=r.useState(["아이스","핫","라떼","에이드","샷추가","생과일","아메리카노"]),[a,t]=r.useState(!1);r.useEffect(()=>{C()},[o]);const c=s=>{n(s.target.value)},M=()=>{u(i)},S=s=>{n(s),u(s)},C=()=>{let s={cafeId:"CAFE0001",menuList:[{menuId:"MENU0001",menuNm:"아메리카노(ICE)"},{menuId:"MENU0002",menuNm:"아메리카노(ICE) 연하게"},{menuId:"MENU0003",menuNm:"아메리카노(HOT)"},{menuId:"MENU0004",menuNm:"아메리카노(HOT) 연하게"},{menuId:"MENU0005",menuNm:"카페라떼(ICE)"},{menuId:"MENU0006",menuNm:"카페라떼(ICE) 연하게"},{menuId:"MENU0007",menuNm:"카페라떼(HOT)"},{menuId:"MENU9999",menuNm:"직접입력"}]};d(s.menuList),x(s.cafeId)},v=()=>{t(s=>!s)},E=s=>{v(),I(s)};return e.jsxs("div",{children:[a&&p&&e.jsx(w,{partyNo:m.partyNo,cafeId:N,menu:p,orderer:m,show:a,toggleShowPopup:v}),e.jsxs("div",{id:"order",className:"element selectmenu",children:[e.jsxs("h1",{children:[e.jsx("span",{className:"point",children:"메뉴를"}),e.jsx("br",{}),"선택해주세요."]}),e.jsxs("div",{className:"person-info bg_sub point",children:[m.name," ",m.rank,"(",m.team,")"]}),e.jsxs("div",{className:"form-search mgt25 mgb15",children:[e.jsx("div",{className:"input",children:e.jsx("input",{type:"text",placeholder:"검색",value:i,onChange:c,className:""})}),e.jsx("div",{className:"btn",children:e.jsx("img",{className:"search-ic",alt:"Search ic",src:U,onClick:M})})]}),e.jsx("div",{className:"tag-group",children:j.map((s,b)=>e.jsxs("div",{className:"menu-tag bg_pink white",onClick:()=>S(s),children:["# ",s]},b))}),e.jsx("div",{className:"orderer-list mgt25",children:h.map(s=>e.jsx("div",{className:"item",onClick:()=>E(s),children:s.menuNm},s.menuId))})]})]})};export{_ as default};
